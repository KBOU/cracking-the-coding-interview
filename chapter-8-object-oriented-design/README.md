# オブジェクト指向

方針:

1. 曖昧さをなくす
    * いつ
    * どこで
    * だれが
    * なにを
    * なぜ
    * どうした  
2. コアとなるオブジェクトを定義する
3. オブジェクト同士の関係を定義する
4. 各オブジェクトのキーとなるアクティビティを定義する


## 8-1. ブラックジャックのゲームを設計

`src/black_jack.coffee`

初期設定まではできたはず・・・  
設計ではなくなってしまった  
必要なクラスの洗い出しまではできているはず・・・

TODO ループしてプレーヤーごとにターン回したり、終了時の勝敗判定が必要

## 8-2. コールセンター業務をシミュレーション

`src/call_center.py`


## 8-3. ジュークボックスの設計

### やること

<table>
  <tr> <th>いつ</th> <td>-</td> </tr>
  <tr> <th>どこで</th> <td>-</td> </tr>
  <tr> <th>だれが</th> <td>誰か</td> </tr>
  <tr> <th>何を</th> <td>ジュークボックス</td> </tr>
  <tr> <th>なぜ</th> <td>音楽を聞きたいから</td> </tr>
  <tr> <th>どうする</th> <td>CDを選択して再生する</td> </tr>
</table>

### フロー

1. コインを投入する
2. コインが規定の金額になったら、CDの選択を可能にする
3. CDが選択されたらお釣りを返す。
4. 選択されたCDをプレーヤーに突っ込む(ジュークボックスが)
5. CDを再生する(プレーヤーが)
6. 再生中にCDが選択されたらプレーリストに登録する
7. CD再生終了を通知(プレーヤーからジュークボックスへ)
8. プレーリストが空でない場合は再び手順5から

今回はめんどくさいのでコイン1枚でOKとし、3の手順ははぶく

### 登場人物と役割

Operator: ジュークボックスを操作する人  
動作

* コイン投入
* CD選択

Jukebox: ジュークボックス  
変数

* CDリスト

動作

* コインが規定の金額になったらCD選択可能にする
* CDをプレーヤーに装填(再生中であればプレーリストへ)

CD: CD  
変数

* 再生秒数

Player: CDプレーヤー  
変数  

* プレーリスト
* 再生状態


動作

* 再生

## 8-4. 駐車場の設計

### やること

<table>
  <tr> <th>いつ</th> <td>-</td> </tr>
  <tr> <th>どこで</th> <td>-</td> </tr>
  <tr> <th>だれが</th> <td>運転手/td> </tr>
  <tr> <th>何を</th> <td>車</td> </tr>
  <tr> <th>なぜ</th> <td>車を止めたいから</td> </tr>
  <tr> <th>どうする</th> <td>駐車する</td> </tr>
</table>

### フロー

1. 車が来る
2. 満車かどうか確認
3. 入り口のバーを開ける
4. 車が通ったらバーを閉じる
5. 車を空きスペースに止める
6. 時間計測スタート
7. 一定時間経過後、車を出す
8. 金額を計算する
9. バーが開く
10. 車が通ったあとバーを閉じる

* 車と駐車時間を対応付ける必要がある
* 満車かどうか確認

### 登場人物と役割

Car: 車  
変数  

* 駐車場のID

動作  

* 駐車する(ID取得)

ParkingLot: 駐車場  
変数  

* 駐車スペース
* 入り口と出口のバー
* 売上
* 満車フラグ

動作  

* バーの上げ下げ管理
* 売上計算

ParkingSpace: 駐車スペース  
変数  

* ID
* 駐車時間

Bar: 入り口出口のバー  

変数  

* 閉じてるか開いているか

動作  

* 閉じる開ける

## 8-5. オンラインブックリーダーの設計

### やること

<table>
  <tr> <th>いつ</th> <td>-</td> </tr>
  <tr> <th>どこで</th> <td>ネットで</td> </tr>
  <tr> <th>誰が</th> <td>アカウントを持ってる人</td> </tr>
  <tr> <th>なにを</th> <td>本</td> </tr>
  <tr> <th>なぜ</th> <td>ネット環境があればいつでもどこでも読めるから</td> </tr>
  <tr> <th>どうする</th> <td>読む</td> </tr>
</table>

### フロー

1. アカウント作成
2. ログイン
3. 購入した本の一覧
4. すべての本から検索
5. 本の購入
6. 本の閲覧


### 登場人物と変数

Book: 本

* ISBN
* タイトル
* コンテンツ
* 著者名
* 価格
* ページ数

User: ユーザー

* ユーザー名
* パスワード
* ログイン状態
* 本棚
* Viewer

BookShelf: ユーザーの本棚

* 本(n)

MarketPlace: 本売り場

* 本(n)


Viewer: 本閲覧ツール

* 閲覧中の本
* 閲覧中のページ番号
* しおり

## 8-6. ジクソーパズルの設計と実装

`src/jigsaw.py`

### 遊び方

1. パズルのピースをシャッフルする
2. パズルのピースを選択する
3. 選択したピースを任意の位置にはめ込む
4. すべてのピースが正しい位置に配置されたらOK

ユーザはピースを正しい位置に置いたかどうかは最後まで判定するすべはないが、  
ピースの組み合わせが正しいかどうかはfitsWithメソッドで判定することができる。


### 登場人物

JigsawPuzzle: パズルのフレーム  
変数  

* パズルのピース

機能  

* ピースをシャッフルする
* パズルが完成したかどうか判定する

Piece: ピース

変数  

* 上下左右のピースID 
* 上下左右がFit済みかフラグ

機能  

* Fitするかどうか判定

Player: プレイヤー  
機能  

* ピースを選択する
* ピースをはめ込む
